# 版本管理系統說明

## 🔢 **版號格式規範**

### 📋 **標準格式**
```
v1.2.3.xxxx
```
- **主版本號 (Major)**: 重大功能變更或不相容更新
- **次版本號 (Minor)**: 新功能添加，向後相容
- **修訂版本號 (Patch)**: Bug修正和小幅改進
- **建置號 (Build)**: 4位數遞增（0001-9999）

### 🔄 **版本遞增規則**

#### 1. **建置號遞增** (Bug修正)
```
v1.2.3.0001 → v1.2.3.0002
```
- 用於：Bug修正、小幅調整
- 頻率：每次修正後立即更新
- 範圍：0001-9999

#### 2. **修訂版本遞增** (功能改進)
```
v1.2.3.9999 → v1.2.4.0001
v1.2.3.0050 → v1.2.4.0001 (手動升級)
```
- 用於：功能改進、重要修正
- 建置號重置為0001
- 向後相容

#### 3. **次版本遞增** (新功能)
```
v1.2.4.0001 → v1.3.0.0001
```
- 用於：新功能添加
- 修訂版本號和建置號重置為0
- 向後相容

#### 4. **主版本遞增** (重大更新)
```
v1.3.0.0001 → v2.0.0.0001
```
- 用於：重大架構變更
- 可能不向後相容
- 所有次級版本號重置

## 🛠️ **版本管理工具**

### **VersionManager 類別**
```typescript
// 解析版本號
const version = VersionManager.parseVersion('v1.2.3.0001');

// 遞增版本號
const newVersion = VersionManager.incrementVersion('v1.2.3.0001', 'build');

// 比較版本號
const comparison = VersionManager.compareVersions('v1.2.3.0001', 'v1.2.3.0002');

// 驗證版本格式
const isValid = VersionManager.isValidVersion('v1.2.3.0001');
```

### **自動化功能**
- **格式驗證**: 確保版本號符合4位數建置號格式
- **智能遞增**: 建置號溢出時自動升級修訂版本
- **版本比較**: 支援完整的版本號比較邏輯
- **統計分析**: 提供版本歷史統計資訊

## 📊 **版本發布流程**

### **開發階段**
1. **Bug修正**: 自動遞增建置號
2. **功能開發**: 手動決定版本類型
3. **測試驗證**: 確保功能正常運作

### **發布階段**
1. **版本檢查**: 驗證版本號格式和遞增邏輯
2. **功能測試**: 執行完整的功能測試清單
3. **用戶確認**: 獲得明確的發布許可
4. **正式發布**: 更新所有相關檔案的版本號

## 🔍 **版本追蹤機制**

### **資料版本控制**
```typescript
// 每次儲存都會記錄版本
const portfolioData = {
  stocks: [...],
  accounts: [...],
  version: 'v1.2.3.0001',
  lastUpdate: '2025-01-01T12:00:00.000Z'
};
```

### **自動遷移**
- 檢測舊版本資料格式
- 自動執行資料結構升級
- 保持向後相容性
- 記錄遷移過程

## 📝 **版本歷史格式**

### **更新日誌範例**
```markdown
### v1.2.3.0001 (2025-01-01) 🐛 - Bug修正版
- 修正股票新增按鈕無法點擊的問題
- 優化帳戶切換邏輯
- 改善錯誤提示訊息

### v1.2.3.0002 (2025-01-02) 🐛 - Bug修正版  
- 修正股息計算錯誤
- 調整響應式佈局間距
```

### **版本類型標記**
- 🚀 **重大版本** (Major)
- ✨ **功能版本** (Minor) 
- 🔧 **修正版本** (Patch)
- 🐛 **Bug修正版** (Build)

## ⚠️ **重要注意事項**

### **版本號限制**
- 建置號最大值：9999
- 超過9999時自動升級修訂版本
- 不支援5位數建置號（舊格式已棄用）

### **發布控制**
- **本地開發**: 可自動更新版本號
- **GitHub發布**: 需要用戶明確確認
- **強制檢查**: 必須通過36項檢查清單

### **相容性保證**
- 同主版本號內保證向後相容
- 跨主版本可能需要手動處理
- 提供完整的遷移工具和說明

這個版本管理系統確保了開發過程的可追蹤性和發布的可控性，同時保持了系統的穩定性和可維護性。