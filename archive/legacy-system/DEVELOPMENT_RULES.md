# 開發執行規則

## 🚨 **強制執行規則**

### **最小改動原則**
1. **每次只修改一個最小的部分**
2. **每次修改後立即測試功能**
3. **確保功能完全正常才進行下一步**
4. **如有問題立即回復上一版本**

### **搜尋順序軟體規則 (強制遵守)**
#### **股票代碼搜尋順序**
1. **證交所API** → 最優先，獲取即時台股資料
2. **Yahoo Finance API** → 備援，國際化股票資料  
3. **本地資料庫** → 最後備援，中文名稱對照
4. **顯示錯誤** → 都找不到時的錯誤提示

#### **股票名稱搜尋順序**
1. **證交所API** → 嘗試名稱搜尋（通常不支援中文）
2. **Yahoo Finance API** → 嘗試名稱搜尋（通常不支援中文）
3. **本地資料庫** → 中文名稱對照表搜尋
4. **顯示錯誤** → 都找不到時的錯誤提示

**⚠️ 重要：不得因為API不支援中文就跳過API搜尋步驟**

### **版本管理規則**
1. **每次修改必須更新版本號**
2. **格式：v1.2.2.xxxx (4位數建置號)**
3. **更新檔案：script.js, version.js, index.html**
4. **記錄版本歷史和修改內容**

### **檔案結構規則**
```
archive/legacy-system/
├── index.html              # 主頁面
├── src/
│   ├── script.js           # 主程式
│   ├── styles.css          # 樣式表
│   ├── version.js          # 版本管理
│   ├── stock-api.js        # API模組
│   └── cloud-sync.js       # 雲端同步
├── LICENSE                 # 授權檔案
├── README.md              # 說明文件
└── DEVELOPMENT_RULES.md   # 本規則檔案
```

### **禁止操作**
❌ **絕對禁止**
- 同時修改多個檔案
- 大幅重寫現有函數
- 刪除現有功能
- 改變檔案結構
- 未經測試就提交

### **修改流程**
1. **確認當前版本穩定**
2. **識別最小修改點**
3. **進行單一修改**
4. **立即測試功能**
5. **更新版本號**
6. **記錄修改內容**
7. **用戶確認功能正常**

### **緊急回復程序**
如果修改導致功能失效：
1. **立即停止所有修改**
2. **回復到上一個穩定版本**
3. **分析失敗原因**
4. **重新規劃更小的修改步驟**

## 🎯 **當前狀態**
- **版本**: v1.2.2.0 (GitHub穩定版)
- **狀態**: 已清理多餘檔案
- **準備**: 等待最小改動指令

## 📋 **修改計畫**
如需合併輸入欄位，執行順序：
1. 只修改placeholder文字
2. 只修改label文字
3. 只增加智能搜尋邏輯
4. 只隱藏一個欄位
5. **每步都要確認功能正常**

**記住：寧可慢一點，也不要破壞功能！**